EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = sk_offWorldObservatory
	title = Off-World Observatory
	baseValue = 300
	scienceCap = 300
	dataScale = 1
	
	RESULTS
	{
	// Credit to Gregoria Luna (Gregrox) for the results text
	default = You begin a survey of deep-sky-objects in the galactic plane. Many open clusters and nebulae are waiting to be found.
	
	SunInSpaceLow = You observe the sun. This was a spectacularly bad idea.
	SunInSpaceHigh = You observe the sun. Only after you hear the "temperature anomaly" alarm do you remember you forgot to install the solar filter. This is a real certified Icarus moment.

	KerbinInSpaceLow = Above the influence of atmospheric turbulence, the telescope is capable of reaching much more consistently high resolutions at a wide field of view than possible from the ground. Until you get orders from the Kerbal Astronomical Society, you use the time to split a few double stars which you hadn't got yet.
	KerbinInSpaceHigh = Far from Kerbin, the observatory is capable of observing a vast portion of the sky with little interference. You begin a survey of distant galaxies.
	KerbinSrfLandedDesert = From within Kerbin's atmosphere, the atmospheric turbulence causes the image to boil and shimmer, leading to a lower resolution. Planetary imaging must be done with extreme-short exposures and with digital processing to stack the image.
	KerbinSrfLandedHighlands = The observatory is relatively unhindered by low-level fog and some of the effects of atmospheric seeing conditions, allowing a higher resolution than at sea level. Still though, it's not the best place for imaging at high resolution, so you mostly concern yourself with assembling mosaics of larger deep-sky-objects.
	KerbinSrfLandedMountains = This is a good place for a remote observatory. Above the effects of light pollution and atmospheric turbulence, the sky opens up in sharp, high resolution detail--though space would be better. You search for nearby exoplanetary transit events with the SLIPPIST-camera.
	KerbinSrfLandedWater = Sea spray and sand is getting into the instrument. That's going to be a maintenance nightmare. You attempt to do some imaging, but between the fog, the turbulent air, and the sea spray, this observing session's a wash.
	KerbinSrfSplashedWater = Sea spray and sand is getting into the instrument. That's going to be a maintenance nightmare. You attempt to do some imaging, but between the fog, the turbulent air, and the sea spray, this observing session's a wash.
	KerbinSrfLandedWater = Sea spray and sand is getting into the instrument. That's going to be a maintenance nightmare. You attempt to do some imaging, but between the fog, the turbulent air, and the sea spray, this observing session's a wash.
	KerbinSrfLandedKSC = Light pollution here at the KSC makes observing deep-sky-objects very impractical. You really need to get out to the middle of nowhere if you wanna see the night sky. Still though, this is a great place for a public Munwatch, maybe Walt Kerman and his P.R. team have an idea about how to do that.
	KerbinSrfLanded =  From within Kerbin's atmosphere, the atmospheric turbulence causes the image to boil and shimmer, leading to a lower resolution. Planetary imaging must be done with extreme-short exposures and with digital processing to stack the image.


	MunInSpaceLow = If you could just slow down, the instrument would be capable of extreme high resolution surface images. In fact, you'd almost not need to send down astronauts! Who needs astronauts when you have astronomers, after all.
	MunInSpaceHigh = Pointing the observatory down towards the surface would make for a high-resolution mapping satellite, but we only packed astronomical sensors, so you'll have to settle for unraveling the mysteries of the cosmos.
	MunSrfLanded = This is a great place for a close-to-home deep space observatory! The skies really pop, day and night.

	// Minmus_InSpaceLow = 
	Minmus_InSpaceHigh = You attempt a long-exposure photo to try and detect a coma or cometary tail... if there is one, it's being washed out by Minmus' incredibly reflective surface.
	MinmusSrfLanded = You attempt to measure the spectrum of a bright star, looking for any additional absorption lines, searching for hints of an extended exosphere or cometary envelope on Minmus. There seems to be a very faint absorption feature which you can't match to the star's database.

	// MohoInSpaceLow = 
	// MohoInSpaceHigh = 
	MohoSrfLanded = Moho's rotation rate is remarkably slow, so despite the incredibly bright sun during the day, very long uninterrupted exposures are possible. One useful application of this observatory would be to search for Near-Kerbin asteroids.
	EveInSpaceLow = Note to self: throw away red and green filters, they don't work here.
	EveInSpaceHigh = You point the telescope at Gilly. It's quite startling to see details on the smallest moon--it normally looks like a faint dot!
	EveSrfLanded = This is a pretty terrible place for an observatory - the thick clouds are always present!
	// GillyInSpaceLow = 
	// GillyInSpaceHigh = 
	GillySrfLanded = A strange, niche location for an observatory, however one which provides many useful opportunities to observe Eve at high resolution. Infrared sensors are capable of piercing the clouds, and blue, violet, and ultra-violet filters are best suited for observing the clouds and weather patterns themselves.
	// IkeInSpaceLow = 
	// IkeInSpaceHigh = 
	IkeSrfLanded = You hope you remembered to land on the Duna-facing hemisphere so you can observe it at high resolution. Ike's stationary orbit provides an excellent viewing post for looking at roughly half of Duna, and a terrible viewing post for looking at anything else.

	// DunaInSpaceLow = 
	// DunaInSpaceHigh =
	DunaSrfLanded = You set up the telescope to point back towards the Kerbin system. Even at high power, they're small. You feel smaller. Dust in the atmosphere prevents the acquisition of faint detail, but the seeing conditions here are very good, and when Jool is at opposition this telescope can beat similar Kerbin-based instruments in seeing its cloud bands, which no longer appear fuzzy.
	DresInSpaceLow = They said to get out in the middle of nowhere to do deep-sky-viewing. But I don't think they meant it like that!
	DresInSpaceHigh = There seems to be a large amount of star-trails interfering with long-exposure images near Dres' equatorial plane... could there be a debris disk here?
	DresSrfLanded = It's like no-one will ever know you put a telescope here. 

	JoolInSpaceLow = From this vantage point, many of the objects in the Jool system are easily seen. Tylo, Vall, Bop, Pol, and Kerbin... hey wait a minute, that's not how this works!
	JoolInSpaceHigh = What do you know, it turns out Jool isn't always fuzzy through a telescope!
	JoolSrfLanded = This location would make a great observing post for studying the Joolian moons, were it not for the scorching temperatures, the crushing pressures, and the many layers of clouds and haze. 

	// LaytheInSpaceLow = 
	LaytheInSpaceHigh = The images you get off the sensors are full of extra noise for some reason. Who needs a geiger counter when you have horrifying signal to noise ratios!
	LaytheSrfLanded = This is like Kerbin, but no light pollution to speak of, well at least as long as you ignore Jool, which is much brighter than the Mun, and Tylo and Vall, which are almost as bright as the Mun... hey we did remember to park the observatory on the far side away from Jool, right?
	LaytheSrfSplashed = Sea spray and sand are getting into the instrument. That's going to be a maintenance nightmare. You attempt to do some imaging, but between the fog, the turbulent air, and the sea spray, this observing session's a wash.

	// VallInSpaceLow = 
	// VallInSpaceHigh = 
	VallSrfLanded = Aside from the radiation messing up the signal, this would make a great observing post for studying the other worlds of this system.

	// TyloInSpaceLow = 
	// TyloInSpaceHigh = 
	TyloSrfLanded = Aside from the radiation messing up the signal, this would make a great observing post for studying the other worlds of this system.

	// BopInSpaceLow = 
	BopInSpaceHigh = You slew the telescope around to face Bop. For some reason the software won't let you focus in on the surface in one place. It gives a "Danger" message like if you try to point it at the Sun.
	// BopSrfLanded = 
	PolInSpaceLow = From low orbit there seems to be a load of statically charged dust particles clinging to the sensor like pollen. Perhaps Pol isn't the best place to put an observatory, even though it does look down on the entire Jool system.
	// PolInSpaceHigh = 
	PolSrfLanded = Keep the dust off the sensors! We've had enough of this kind of error in the past. At least dust on the mirrors makes little difference aside from reducing the contrast and resolution slightly. It'd probably just damage the mirrors more if we tried to wipe them clean.

	// EelooInSpaceLow = 
	EelooInSpaceHigh = Now THIS is the middle of nowhere! From this perspective, the magnitude of many faint trans-joolean-objects is increased dramatically during opposition, allowing for a better and more accurate categorization of the small icy objects sharing the space beyond Jool.
	EelooSrfLanded = Eeloo is great because it's very easy to cool the imaging sensors to reduce noise. You contemplate plans to shovel the surface material directly onto the sensor to improve cooling.
	}
}

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = sk_plantGrowthStudy
	title = Plant Growth Study
	baseValue = 50
	scienceCap = 50
	dataScale = 1
	
	RESULTS	
	{
	}
}

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = sk_generalStudies
	title = General Studies
	baseValue = 1000000
	scienceCap = 1000000
	dataScale = 1
	
	RESULTS	
	{
	}
}

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = sk_planetaryRegionalSurvey
	title = Planetary Regional Survey
	baseValue = 192
	scienceCap = 192
	dataScale = 1
	
	RESULTS	
	{
	}
}

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = sk_floatingOceanicResearch
	title = Floating Oceanic Research
	baseValue = 400
	scienceCap = 400
	dataScale = 1
	
	RESULTS	
	{
	}
}

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = sk_lunarRadiotelescopeArray
	title = Lunar Radiotelescope Array
	baseValue = 10000
	scienceCap = 10000
	dataScale = 1
	
	RESULTS	
	{
	}
}

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = sk_colonialFeasibilityDemonstration
	title = Colonial Feasibility Demonstration
	baseValue = 5000
	scienceCap = 5000
	dataScale = 1
	
	RESULTS	
	{
	}
}

@KERBALISM_GROUP_SETTINGS:NEEDS[FeatureScience]
{
	SK_LabExperiments
	{
		BaseSlots = 1

		sk_offWorldObservatory
		{
			ECCost = 5	
			size = 512 						
			value = 300 							
			duration = 18407090
			SetupMass =
			SetupCost =
			UnlockTech = spaceStations8
			requirements = Shadow
			ResourceRates =
			CrewRequirement = 2
		}
		sk_plantGrowthStudy
		{
			ECCost = 	
			size = 512				
			value = 100							
			duration = 4601772.5
			SetupMass =
			SetupCost =
			UnlockTech = 
			requirements = CrewMin:2
			ResourceRates = 
			CrewRequirement = Scientist
		}
		sk_generalStudies
		{
			ECCost = 5	
			size = 460177250						
			value = 2000000000								
			duration = 920354500000 
			SetupMass =
			SetupCost =
			UnlockTech = 
			requirements =
			ResourceRates =
			CrewRequirement = Scientist
		}
		sk_planetaryRegionalSurvey
		{
			ECCost = 10	
			size = 30720						
			value = 192								
			duration = 648000
			SetupMass =
			SetupCost =
			UnlockTech = 
			requirements = CrewMin:3
			ResourceRates =
			CrewRequirement = Scientist
		}
		sk_floatingOceanicResearch
		{
			ECCost = 100	
			size = 512						
			value = 250								
			duration = 1296000 
			SetupMass =
			SetupCost =
			UnlockTech = 
			requirements = CrewMin:5
			ResourceRates =
			CrewRequirement = Scientist
		}	
		sk_colonialFeasibilityDemonstration
		{
			ECCost = 100	
			size = 512						
			value = 5000								
			duration = 92035450  
			SetupMass =
			SetupCost =
			UnlockTech = bases10
			requirements = CrewMin:30
			ResourceRates =
			CrewRequirement = true
		}
		sk_lunarRadiotelescopeArray
		{
			ECCost = 1000	
			size = 512						
			value = 10000								
			duration = 276106350  
			SetupMass =
			SetupCost =
			UnlockTech = bases11
			requirements = CrewMin:10
			ResourceRates =
			CrewRequirement = Scientist
		}		
	}
}

//@EXPERIMENT_DEFINITION:HAS[#id[sk_offWorldObservatory]]:NEEDS[FeatureScience]:FOR[SkyhawkKerbalism]
//{
//	@baseValue = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_offWorldObservatory/value$
//	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_offWorldObservatory/size$
//	@dataScale /= #$baseValue$
//
//	%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_offWorldObservatory/duration$
//
//	KERBALISM_EXPERIMENT
//	{
//		Situation = Global
//		
//		BodyNotAllowed = HomeBody
//	}
//}

@EXPERIMENT_DEFINITION:HAS[#id[sk_plantGrowthStudy]]:NEEDS[FeatureScience]:FOR[SkyhawkKerbalism]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_plantGrowthStudy/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_plantGrowthStudy/size$
	@dataScale /= #$baseValue$

	%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_plantGrowthStudy/duration$

	KERBALISM_EXPERIMENT
	{
		Situation = BodyGlobal
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[sk_generalStudies]]:NEEDS[FeatureScience]:FOR[SkyhawkKerbalism]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_generalStudies/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_generalStudies/size$
	@dataScale /= #$baseValue$

	%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_generalStudies/duration$
	
	KERBALISM_EXPERIMENT
	{	
		Situation = Surface
		Situation = Space
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[sk_planetaryRegionalSurvey]]:NEEDS[FeatureScience]:FOR[SkyhawkKerbalism]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_planetaryRegionalSurvey/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_planetaryRegionalSurvey/size$
	@dataScale /= #$baseValue$

	%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_planetaryRegionalSurvey/duration$
	
	KERBALISM_EXPERIMENT
	{
		Situation = Surface@Biomes
		Situation = Space
		
		BodyNotAllowed = HomeBody
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[sk_floatingOceanicResearch]]:NEEDS[FeatureScience]:FOR[SkyhawkKerbalism]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_floatingOceanicResearch/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_floatingOceanicResearch/size$
	@dataScale /= #$baseValue$

	%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_floatingOceanicResearch/duration$
	
	KERBALISM_EXPERIMENT
	{	
		Situation = SrfSplashed@Biomes
		
		BodyAllowed = Oceanic
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[sk_colonialFeasibilityDemonstration]]:NEEDS[FeatureScience]:FOR[SkyhawkKerbalism]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/size$
	@dataScale /= #$baseValue$
	
	%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/duration$

	KERBALISM_EXPERIMENT
	{	
		Situation = Surface
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[sk_lunarRadiotelescopeArray]]:NEEDS[FeatureScience]:FOR[SkyhawkKerbalism]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/size$
	@dataScale /= #$baseValue$
	
	%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/duration$

	KERBALISM_EXPERIMENT
	{	
		Situation = SrfLanded
		
		BodyAllowed = HomeBodyAndMoons
		BodyNotAllowed = HomeBody
		BodyNotAllowed = Atmospheric
	}
}

@PART[*]:HAS[@MODULE[ModuleScienceLab],~SK_LabCapacity[>0]]:NEEDS[FeatureScience]
{
	!MODULE[ModuleScienceLab] {}
	!MODULE[ModuleScienceConverter] {}
	
	%SK_LabExperiments = True
	%SK_LabCapacity = #$/CrewCapacity$
}

@PART[*]:HAS[#SK_LabExperiments[True],~CrewCapacity[>1]]:NEEDS[FeatureScience]
{
	MODULE
	{
		name = Experiment
		experiment_id = sk_generalStudies
	}	
	MODULE
	{
		name = Laboratory
		researcher = Scientist
		analysis_rate = 0.005 // 5 kbps
		@analysis_rate *= #$/SK_LabCapacity$
		ec_rate = 5.0
		@ec_rate *= #$/SK_LabCapacity$
	}
}

@PART[*]:HAS[#SK_LabExperiments[True],#CrewCapacity[>1]]:NEEDS[FeatureScience]
{
	MODULE
	{
		name = Experiment
		experiment_id = sk_generalStudies
	}
	MODULE
	{
		name = Experiment
		experiment_id = sk_planetaryRegionalSurvey
	}
	MODULE
	{
		name = Experiment
		experiment_id = sk_floatingOceanicResearch
	}
	MODULE
	{
		name = Experiment
		experiment_id = sk_orbitalHabitabilitySurvey
	}	
	MODULE
	{
		name = Experiment
		experiment_id = sk_colonialFeasibilityDemonstration
	}	
	MODULE
	{
		name = Experiment
		experiment_id = sk_lunarRadiotelescopeArray
	}	
	MODULE
	{
		name = Laboratory
		researcher = Scientist
		analysis_rate = 0.005 // 5 kbps
		@analysis_rate *= #$/SK_LabCapacity$
		ec_rate = 5.0
		@ec_rate *= #$/SK_LabCapacity$
	}
	MODULE:NEEDS[FeatureComfort]
	{
		name = Comfort
		desc = The doctors will help keep crew members on specialized exercise routines. They won't like it, but the benefits to their overall health are well worth it.
		bonus = exercise
	}
	MODULE 
	{
		name = Sickbay
		resource = _SickbayTherapy
		title = Stress Reduction Therapy
		desc = The medics in the sickbay are trained to admister therapy to their fellow crewmembers, to help reduce their overall stress. 
		slots = 1
		cureEverybody = True
	}
	MODULE 
	{
		name = Sickbay
		resource = _SickbayRDU
		title = Radiation Detoxication Unit
		desc = The Radiation Detoxication Unit (RDU) uses EC and Oxygen to reduce the effects of radiation poisoning.
		slots = 1
		@slots *= #$/SK_LabCapacity$
		@slots *= 0.5
	}
	MODULE
	{
		name = Configure
		title = Lab Projects
		slots = 1
		reconfigure = Scientist@3
		SETUP
		{
			name = Planetary Regional Survey
			desc = This lab is outfitted with gear to allow for short-term research of a planetary region, ideal for extended-length landing missions. 
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = sk_planetaryRegionalSurvey
			}
		}
		SETUP
		{
			name = Floating Oceanic Research
			desc = This lab is outfitted to study the oceans of alien worlds, and includes all sorts of fancy gadgets to do so, including a small submersible!
			tech = science9
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = sk_floatingOceanicResearch
			}
		}	
		SETUP
		{
			name = Colonial Feasibility Demonstration
			desc = This lab is the administrative centerpiece for one of the hardest projects Kerbal-kind has ever undertanken - fully colonizing an alien world. If we can show the government we can mantain a large installation for a decade, they will be willing to support a planet-wide colonization project.
			tech = science10
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = sk_colonialFeasibilityDemonstration
			}
		}	
		SETUP
		{
			name = Lunar Radiotelescope Array
			desc = This lab holds all the equipment needed to operate and mantain a massive radiotelescope array on the far side one of our natural satellites, where it'll be shielded from all the signals emitted from our homeworld. It's no small undertaking, but the science will be well worth it!	
			tech = bases11
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = sk_lunarRadiotelescopeArray
			}
		}
	}
	MODULE
	{
		name = Configure
		title = Lab Configuration
		slots = 1
		reconfigure = Scientist@5
		SETUP
		{
			name = General Studies Lab
			desc = This lab is configured to perform general scientific research, to analyze and study samples collected in situ, and to transmit those results back home as data, rather than requiring the samples themselves to be sent back physically.
			MODULE
			{
				type = Laboratory
				id_field = researcher
				id_value = Scientist
			}
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = sk_generalStudies
			}
		}
		SETUP
		{
			name = Projects Lab
			desc = This lab is configured to provide support for a selection of specific projects, which can then be specifically selected based on a mission's parameters.
			tech = science9
			MODULE
			{
				type = Configure
				id_field = title
				id_value = Lab Projects
			}
		}
		SETUP
		{
			name = Sickbay
			desc = This lab is configured to provide medical support for Kerbals, including fitness programs, stress-reduction therapy, and radiation decontamination.
			tech = science11
			MODULE
			{
				type = Comfort
				id_field = bonus
				id_value = exercise
			}
			MODULE
			{
				type = Sickbay
				id_field = title
				id_value = Stress Reduction Therapy
			}
			MODULE
			{
				type = Sickbay
				id_field = title
				id_value = Radiation Detoxication Unit
			}
		}
	}
}

@PART[*]:HAS[@MODULE[Configure]:HAS[#title[Lab?Configuration]],@MODULE[Configure]:HAS[#title[Lab?Projects]],#TechRequired[spaceStations*]]:NEEDS[FeatureScience]:AFTER[zzzKerbalismskyhawk]
{
	@MODULE[Configure]:HAS[#title[Lab?Configuration]]
	{
		@SETUP:HAS[#name[Projects?Lab]]
		{
			%tech = spaceStations9
		}	

		@SETUP:HAS[#name[Sickbay]]
		{
			%tech = spaceStations11
		}		
	}
		
	@MODULE[Configure]:HAS[#title[Lab?Projects]]
	{

		
		@SETUP:HAS[#name[Floating?Oceanic?Research]]
		{
			%tech = spaceStations9		}
		
		@SETUP:HAS[#name[Colonial?Feasibility?Demonstration]]
		{
			%tech = spaceStations10
		}
		
		@SETUP:HAS[#name[Lunar?Radiotelescope?Array]]
		{
			%tech = spaceStations11
		}		
	}		
}

@PART[*]:HAS[@MODULE[Configure]:HAS[#title[Lab?Configuration]],@MODULE[Configure]:HAS[#title[Lab?Projects]],#TechRequired[bases*]]:NEEDS[FeatureScience]:AFTER[zzzKerbalismskyhawk]
{
	@MODULE[Configure]:HAS[#title[Lab?Configuration]]
	{
		@SETUP:HAS[#name[Projects?Lab]]
		{
			%tech = bases9
		}	

		@SETUP:HAS[#name[Sickbay]]
		{
			%tech = bases11
		}		
	}
	
	@MODULE[Configure]:HAS[#title[Lab?Projects]]
	{	
		@SETUP:HAS[#name[Floating?Oceanic?Research]]
		{
			%tech = bases9
		}
		
		@SETUP:HAS[#name[Colonial?Feasibility?Demonstration]]
		{
			%tech = bases10
		}
		
		@SETUP:HAS[#name[Lunar?Radiotelescope?Array]]
		{
			%tech = bases11
		}		
	}	
}

//Adding the experiment traits to the Configure module.
@PART[*]:HAS[@MODULE[Configure]:HAS[#title[Lab?Projects]]]:NEEDS[FeatureScience]:FOR[KerbalismSkyhawk]
{
	
	@MODULE[Experiment]:HAS[#experiment_id[sk_planetaryRegionalSurvey]]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_planetaryRegionalSurvey/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_planetaryRegionalSurvey/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_planetaryRegionalSurvey/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_planetaryRegionalSurvey/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_planetaryRegionalSurvey/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_planetaryRegionalSurvey/ResourceRates$
		
		%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_planetaryRegionalSurvey/duration$
		%experimentSize = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_planetaryRegionalSurvey/size$
	}	
	
	@MODULE[Experiment]:HAS[#experiment_id[sk_floatingOceanicResearch]]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_floatingOceanicResearch/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_floatingOceanicResearch/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_floatingOceanicResearch/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_floatingOceanicResearch/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_floatingOceanicResearch/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_floatingOceanicResearch/ResourceRates$
		
		%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_floatingOceanicResearch/duration$
		%experimentSize = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_floatingOceanicResearch/size$
	}		

	@MODULE[Experiment]:HAS[#experiment_id[sk_colonialFeasibilityDemonstration]]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/CrewRequirement
		%requires = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/ResourceRates$
		
		%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/duration$
		%experimentSize = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_colonialFeasibilityDemonstration/size$
	}	

	@MODULE[Experiment]:HAS[#experiment_id[sk_lunarRadiotelescopeArray]]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_lunarRadiotelescopeArray/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_lunarRadiotelescopeArray/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_lunarRadiotelescopeArray/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_lunarRadiotelescopeArray/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_lunarRadiotelescopeArray/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_lunarRadiotelescopeArray/ResourceRates$
		
		%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_lunarRadiotelescopeArray/duration$
		%experimentSize = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_lunarRadiotelescopeArray/size$
	}		
}

@PART[*]:HAS[@MODULE:HAS[#experiment_id[sk_generalStudies]]]:NEEDS[FeatureScience]:AFTER[SkyhawkKerbalism]
{
	@MODULE[Experiment]:HAS[#experiment_id[sk_generalStudies]]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_generalStudies/ECCost$
		@ec_rate *= #$/SK_LabCapacity$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_generalStudies/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_generalStudies/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_generalStudies/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_generalStudies/duration$
		@data_rate *= #$/SK_LabCapacity$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_generalStudies/ResourceRates$
		
		%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_generalStudies/duration$
		%experimentSize = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_generalStudies/size$
	}
}

@PART[*]:HAS[@MODULE:HAS[#name[Greenhouse]]]:NEEDS[FeatureScience]:AFTER[SkyhawkKerbalism]
{
	MODULE
	{
		name = Experiment
		experiment_id = sk_plantGrowthStudy
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_plantGrowthStudy/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_plantGrowthStudy/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_plantGrowthStudy/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_plantGrowthStudy/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_plantGrowthStudy/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_plantGrowthStudy/ResourceRates$
		%crew_prepare = Scientist
		
		%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_plantGrowthStudy/duration$
		%experimentSize = #$@KERBALISM_GROUP_SETTINGS/SK_LabExperiments/sk_plantGrowthStudy/size$
	}
}
